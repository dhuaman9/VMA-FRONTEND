<div class="px-5 py-3">
    <div style="text-align: center; margin-bottom: 20px;">
      <h2 style="margin-bottom: 20px;">Lista de Anexos VMA </h2>
      <span>seleccionar el año:</span>
      <p-dropdown
        [options]="years"
        [(ngModel)]="selectedYear"
        placeholder="Seleccionar el año"
        class="combobox-anio">
      </p-dropdown>
      <button pButton
              type="button"
              label="Actualizar"
              (click)="applyFilter()"
              style="margin-left: 10px;">
      </button>
    </div>

    <div>
      <h2>Anexo N° 01: Relación de las EP que remitieron información y/o implementaron normativa y/o remitieron informes de implementación de los VMA del año en curso.</h2>
      <p-table [value]="anexoRegistros" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>N°</th>
            <th>Empresa Prestadora</th>
            <th>Tamaño</th>
            <th>RAT</th>
            <th>EPS remitió información</th>
            <th>EPS remitió informe</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-anexo let-i="rowIndex">
          <tr>
            <td>{{i+1}}</td>
            <td>{{anexo.nombreEmpresa}}</td>
            <ng-container *ngIf="anexo.rowspan; else noRowspan">
              <td [attr.rowspan]="anexo.rowspan" class="text-center">{{anexo.tamanioEmpresa}}</td>
            </ng-container>
            <ng-template #noRowspan></ng-template>
            <td>{{anexo.esRAT ? 'SÍ' : 'NO'}}</td>
            <td>{{anexo.epsRemitioInformacion ? 'SÍ' : 'NO'}}</td>
            <td>{{anexo.epsRemitioInforme ? 'SÍ' : 'NO'}}</td>
          </tr>
        </ng-template>
      </p-table>

    </div>

  <div class="mt-4">
    <h2>Anexo N° 02: </h2>

    <ng-container *ngIf="anexoRespondieronSi.length > 0; else noResults">
      <p-table [value]="anexoRespondieronSi" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>N°</th>
            <th>Empresa Prestadora</th>
            <th>Tamaño</th>
            <th>Área VMA</th>
            <th>N° trabajadores</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-anexo let-i="rowIndex">
          <tr>
            <td>{{i+1}}</td>
            <td>{{anexo.nombreEmpresa}}</td>
            <ng-container *ngIf="anexo.rowspan; else noRowspan">
              <td [attr.rowspan]="anexo.rowspan" class="text-center">{{anexo.tamanioEmpresa}}</td>
            </ng-container>
            <ng-template #noRowspan></ng-template>
            <td>{{anexo.respuesta}}</td>
            <td>{{anexo.nroTrabajadores}}</td>
          </tr>
        </ng-template>
      </p-table>
    </ng-container>


  </div>

  <ng-template #noResults>
    <p-message severity="info" text="No existen registros para este año"></p-message>
  </ng-template>

  </div>
